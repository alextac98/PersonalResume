\documentclass[12pt]{article}

\RequirePackage[margin=2cm]{geometry}
\RequirePackage{fontawesome}
\RequirePackage{ifxetex,ifluatex}
\RequirePackage{scrlfile}

% Load Academicons if available
\ifxetex
	\RequirePackage{fontspec}
	\RequirePackage{academicons}
	\setmainfont{Carlito}
\else
	\ifluatex
		\RequirePackage{fontspec}
		\RequirePackage{academicons}
		\setmainfont{Carlito}
	\else
		\usepackage[utf8]{inputenc}
		\usepackage[T1]{fontenc}
		\usepackage[default]{lato}
	\fi
\fi

\RequirePackage[newcommands]{ragged2e}
\RequirePackage{xcolor}
\RequirePackage{tikz}
\RequirePackage{calc}

\RequirePackage[skins,breakable]{tcolorbox}
\RequirePackage{enumitem}
\RequirePackage{multirow,tabularx}
\RequirePackage{hyperref}

% Set Colors
\definecolor{headingColor}{HTML}{000000}
\definecolor{accentColor}{HTML}{ff0000}
\definecolor{emphasisColor}{HTML}{2E2E2E}
\definecolor{bodyColor}{HTML}{666666}

\colorlet{heading}{headingColor}
\colorlet{accent}{accentColor}
\colorlet{emphasis}{emphasisColor}
\colorlet{body}{bodyColor}


\newcommand{\itemmarker}{{\small\textbullet}}
\newcommand{\ratingmarker}{\faCircle}

\setlength{\parindent}{0pt}
\newcommand{\divider}{\textcolor{body!30}{\hdashrule{\linewidth}{0.6pt}{0.5ex}}\medskip}

\newenvironment{fullwidth}{%
  \begin{adjustwidth}{}{\dimexpr-\marginparwidth-\marginparsep\relax}}
  {\end{adjustwidth}}

\newcommand{\emailsymbol}{\faAt}
\newcommand{\phonesymbol}{\faPhone}
\newcommand{\homepagesymbol}{\faChain}
\newcommand{\locationsymbol}{\faMapMarker}
\newcommand{\linkedinsymbol}{\faLinkedin}
\newcommand{\twittersymbol}{\faTwitter}
\newcommand{\githubsymbol}{\faGithub}
\newcommand{\orcidsymbol}{\aiOrcid}
\newcommand{\mailsymbol}{\faEnvelope}\newcommand{\tagline}[1]{\def\@tagline{#1}}
\newcommand{\twitter}[1]{\printinfo{\twittersymbol}{#1}}
\newcommand{\linkedin}[1]{\printinfo{\linkedinsymbol}{#1}}
\newcommand{\github}[1]{\printinfo{\githubsymbol}{#1}}
\newcommand{\orcid}[1]{\printinfo{\orcidsymbol}{#1}}
\newcommand{\location}[1]{\printinfo{\locationsymbol}{#1}}
\newcommand{\personalinfo}[1]{\def\@personalinfo{#1}}

\newcommand{\printinfo}[2]{\mbox{\textcolor{heading}{\normalfont #1}\hspace{0.5em}#2}}



\newcommand{\makeheading}[4]{
	\begingroup
		\Huge\centering\bfseries\MakeUppercase{#1}\\[-0.6\baselineskip]
		\color{heading}\rule{\linewidth}{2pt}\\[0.3\baselineskip]
		
		\begin{minipage}{0.31\textwidth}
			\large\bfseries\centering{\printinfo{\phonesymbol}{#2}}
		\end{minipage}%
		\begin{minipage}{0.02\textwidth}
			\vline height 20pt depth 0pt width 2pt
		\end{minipage}%
		\begin{minipage}{0.34\textwidth}
			\large\bfseries\centering{\href{mailto:#3}{\printinfo{\mailsymbol}{#3}}}
		\end{minipage}%
		\begin{minipage}{0.02\textwidth}
			\vline height 20pt depth 0pt width 2pt
		\end{minipage}%
		\begin{minipage}{0.31\textwidth}
			\large\bfseries\centering{\href{https://#4}{\printinfo{\homepagesymbol}{#4}}}
		\end{minipage}    
	\endgroup\medskip
}

\newcommand{\resumesection}[2]{
	\bigskip\noindent
	{\color{heading}\LARGE\bfseries\MakeUppercase{#1} 
		\hfill \color{heading}\normalsize\bfseries{#2}}\\[-0.6\baselineskip]
	{\color{heading}\rule{\linewidth}{1pt}\par}\medskip
}

\newcommand{\cvsection}[2]{
    \bigskip\noindent
    {\color{heading}\LARGE\bfseries\MakeUppercase{#1} \hfill \color{heading}\normalsize\bfseries{#2} \\[-0.6\baselineskip]}
    {\color{heading}\rule{\textwidth}{1pt}\par}
}

\newcommand{\resumesubsection}[1]{%
  {\color{emphasis}\bfseries{#1}}
}

\newcommand{\skillsection}[2]{
    \resumesubsection{#1:} {#2}
}

% Skills Circle
\newlength{\outerskill}
\newlength{\innerskill}
\setlength{\outerskill}{0.9cm}
\setlength{\innerskill}{0.8cm}
\newcommand{\skillcircle}[2]{
  \begin{tikzpicture}
    \fill[black!80] (0,0) circle (\outerskill);
    \fill[accent!70,draw=white,line width=2pt] (0,0) -- (0, \outerskill+1pt)
      arc (90:90-3.6*#1:\outerskill+1pt) -- (0,0);
    \fill[white] (0,0) circle (\innerskill);
    \node[align=center, text width = 2*\innerskill] (0,0) { #2};
  \end{tikzpicture}
}
%\progresscircle{85.34}{\textbf{Test 1} \\ seems okay} % Example 1

% v1.1.4: fixes inconsistent font size
\newcommand{\event}[4]{%
  {\large\color{emphasis}#1\par}
  \smallskip\normalsize
  \ifstrequal{#2}{}{}{
  \textbf{\color{accent}#2}\par
  \smallskip}
  \ifstrequal{#3}{}{}{{\small\makebox[0.5\linewidth][l]{\faCalendar\hspace{0.5em}#3}}}%
  \ifstrequal{#4}{}{}{{\small\makebox[0.5\linewidth][l]{\faMapMarker\hspace{0.5em}#4}}}\par
  \medskip\normalsize
}

\newcommand{\cvachievement}[3]{%
  \begin{tabularx}{\linewidth}{@{}p{2em} @{\hspace{1ex}} >{\raggedright\arraybackslash}X@{}}
  \multirow{2}{*}{\Large\color{accent}#1} & \bfseries\textcolor{emphasis}{#2}\\
  & #3
  \end{tabularx}%
  \smallskip
}

\newcommand{\cvtag}[1]{%
  \tikz[baseline]\node[anchor=base,draw=body!30,rounded corners,inner xsep=1ex,inner ysep =0.75ex,text height=1.5ex,text depth=.25ex]{#1};
}

\newcommand{\cvskill}[2]{%
\textcolor{emphasis}{\textbf{#1}}\hfill
\foreach \x in {1,...,5}{%
  \space{\ifnumgreater{\x}{#2}{\color{body!30}}{\color{accent}}\ratingmarker}}\par%
}

% Adapted from @Jake's answer at http://tex.stackexchange.com/a/82729/226
\newcommand{\wheelchart}[4][0]{%
    \begingroup\centering
    \def\innerradius{#3}%
    \def\#3{#2}%
    % Calculate total
    \pgfmathsetmacro{\totalnum}{0}%
    \foreach \value/\colour/\name in {#4} {%
        \pgfmathparse{\value+\totalnum}%
        \global\let\totalnum=\pgfmathresult%
    }%
    \begin{tikzpicture}

      % Calculate the thickness and the middle line of the wheel
      \pgfmathsetmacro{\wheelwidth}{\outerradius-\innerradius}
      \pgfmathsetmacro{\midradius}{(\outerradius+\innerradius)/2}
      \pgfmathsetmacro{\totalrot}{-90 + #1}

      % Rotate so we start from the top
      \begin{scope}[rotate=\totalrot]

      % Loop through each value set. \cumnum keeps track of where we are in the wheel
      \pgfmathsetmacro{\cumnum}{0}
      \foreach \value/\width/\colour/\name in {#4} {
            \pgfmathsetmacro{\newcumnum}{\cumnum + \value/\totalnum*360}

            % Calculate the percent value
            \pgfmathsetmacro{\percentage}{\value/\totalnum*100}
            % Calculate the mid angle of the colour segments to place the labels
            \pgfmathsetmacro{\midangle}{-(\cumnum+\newcumnum)/2}

            % This is necessary for the labels to align nicely
            \pgfmathparse{
               (-\midangle>180?"west":"east")
            } \edef\textanchor{\pgfmathresult}
            \pgfmathparse{
               (-\midangle>180?"flush left":"flush right")
            } \edef\textalign{\pgfmathresult}
            \pgfmathsetmacro\labelshiftdir{1-2*(-\midangle<180)}

            % Draw the color segments. Somehow, the \midrow units got lost, so we add 'pt' at the end. Not nice...
            \filldraw[draw=white,fill=\colour] (-\cumnum:\outerradius) arc (-\cumnum:-(\newcumnum):\outerradius) --
            (-\newcumnum:\innerradius) arc (-\newcumnum:-(\cumnum):\innerradius) -- cycle;

            % Draw the data labels
            \draw  [*-,thin,emphasis] node [append after command={(\midangle:\midradius pt) -- (\midangle:\outerradius + 1ex) -- (\tikzlastnode)}] at (\midangle:\outerradius + 1ex) [xshift=\labelshiftdir*0.5cm,inner sep=1ex, outer sep=0pt, text width=\width,anchor=\textanchor,align=\textalign,font=\small,text=body]{\name};
            % Set the old cumulated angle to the new value
            \global\let\cumnum=\newcumnum
        }
      \end{scope}
%      \draw[gray] (0,0) circle (\outerradius) circle (\innerradius);
    \end{tikzpicture}\par
    \endgroup
}

\newcommand{\cvref}[3]{%
  \smallskip
  \textcolor{emphasis}{\textbf{#1}}\par
  \begin{description}[font=\color{accent},style=multiline,leftmargin=1.35em]
  \item[\normalfont\emailsymbol] #2
  \item[\small\normalfont\mailsymbol] #3
  \end{description}
%   \medskip
}

\newenvironment{cvcolumn}[1]{\begin{minipage}[t]{#1}\raggedright}{\end{minipage}}

\RequirePackage[backend=biber,style=authoryear,sorting=ydnt]{biblatex}
%% For removing numbering entirely when using a numeric style
% \setlength{\bibhang}{1em}
% \DeclareFieldFormat{labelnumberwidth}{\makebox[\bibhang][l]{\itemmarker}}
% \setlength{\biblabelsep}{0pt}
\defbibheading{pubtype}{\cvsubsection{#1}}
\renewcommand{\bibsetup}{\vspace*{-\baselineskip}}
\AtEveryBibitem{\makebox[\bibhang][l]{\itemmarker}}
\setlength{\bibitemsep}{0.25\baselineskip}

% v1.1.2: make it easier to add a sidebar aligned with top of next page
\RequirePackage{afterpage}
\newcommand{\addsidebar}[2][]{\marginpar{%
  \ifstrequal{#1}{}{}{\vspace*{#1}}%
  \input{#2}}%
}
%\newcommand{\addnextpagesidebar}[2][]{\afterpage{\addsidebar[#1]{#2}}}

%\AtBeginDocument{%
%  \pagestyle{empty}
%  \color{body}
%  \raggedright
%}
